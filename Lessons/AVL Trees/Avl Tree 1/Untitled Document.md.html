<!DOCTYPE html><html><head><meta charset="utf-8"><title>Untitled Document.md</title><style></style></head><body id="preview">
<h1 class="code-line" data-line-start="0" data-line-end="1"><a id="Avl_trees_0"></a>Avl trees</h1>
<ul>
<li class="has-line-data" data-line-start="2" data-line-end="3">Remember that BST are used to provide O(logn) lookup, insertionm and deletion</li>
<li class="has-line-data" data-line-start="3" data-line-end="6">However, this O(logn) lookup only happens if its a complete binary tree
<ul>
<li class="has-line-data" data-line-start="4" data-line-end="5">A tree where all levels are filled with the possible exception of the last level which is filled from left to right</li>
<li class="has-line-data" data-line-start="5" data-line-end="6">Given a complete BST, the height of the tree is approcimately logn, where n is the number of nodes</li>
</ul>
</li>
</ul>
<h1 class="code-line" data-line-start="9" data-line-end="11"><a id="Motivation_for_AVL_Trees_9"></a>Motivation for AVL Trees</h1>
<p class="has-line-data" data-line-start="12" data-line-end="13">Balanced v Unbalanced</p>
<p class="has-line-data" data-line-start="14" data-line-end="15"><img src="image.png" alt="Alt text"></p>
<ul>
<li class="has-line-data" data-line-start="16" data-line-end="17">The unbalanced BST is basically a linked list in tree clothing</li>
<li class="has-line-data" data-line-start="17" data-line-end="18">It takes 2 tests to located 12, 3 to locate 14, and 8 to locate 52</li>
<li class="has-line-data" data-line-start="18" data-line-end="19">Hence the search effort for this tree is O(N)</li>
<li class="has-line-data" data-line-start="19" data-line-end="20">We want to maintain balance in our BSTs</li>
<li class="has-line-data" data-line-start="20" data-line-end="21">AVL trees will help maintain balance</li>
<li class="has-line-data" data-line-start="21" data-line-end="25">Its definition is:
<ul>
<li class="has-line-data" data-line-start="22" data-line-end="23">A BST in which the heights of the subtrees of any given node, differ by no more than 1</li>
<li class="has-line-data" data-line-start="23" data-line-end="24">For EVERY node in a BST, you must check the height of the left and right subtree of that node</li>
<li class="has-line-data" data-line-start="24" data-line-end="25">If the height of those subtrees differ by no more than 1, then the BST is an AVL tree</li>
</ul>
</li>
<li class="has-line-data" data-line-start="25" data-line-end="27">Thus, an AVL tree is a balanced BST</li>
</ul>
<p class="has-line-data" data-line-start="27" data-line-end="28"><img src="image-1.png" alt="Alt text"></p>
<ul>
<li class="has-line-data" data-line-start="29" data-line-end="30">This BST is an AVL Tree</li>
<li class="has-line-data" data-line-start="30" data-line-end="31">It takes 2 tests to locate 18, 3 to locate 12, and 4 to locate 8</li>
<li class="has-line-data" data-line-start="31" data-line-end="32">Hence, the search effort for this binary tree is O(log2n)</li>
<li class="has-line-data" data-line-start="32" data-line-end="34">For a tree with 1000 nodes, the worst case for a completely unbalanced tree is 1000 tests.
<ul>
<li class="has-line-data" data-line-start="33" data-line-end="34">Again, degenerating to a linked list</li>
</ul>
</li>
<li class="has-line-data" data-line-start="34" data-line-end="36">However, the worst case for a balanced tree is 10 tests</li>
</ul>
<h1 class="code-line" data-line-start="36" data-line-end="38"><a id="AVL_Trees_Formal_Definiton_36"></a>AVL Trees: Formal Definiton:</h1>
<ol>
<li class="has-line-data" data-line-start="38" data-line-end="39">All empty trees are also, by definition, AVL trees</li>
<li class="has-line-data" data-line-start="39" data-line-end="44">If T is a non-empty BST with T_l and T_r as its left and right subtrees, respectively, then T is an AVL tree if an only if:
<ol>
<li class="has-line-data" data-line-start="40" data-line-end="41">T_l and T_r are also AVL trees</li>
<li class="has-line-data" data-line-start="41" data-line-end="44">|h_l - h_r| &lt;= 1<br>
(where hl and hr are the heights of Tl and Tr respectively)</li>
</ol>
</li>
</ol>
<p class="has-line-data" data-line-start="44" data-line-end="45"><img src="image-2.png" alt="Alt text"></p>
<ul>
<li class="has-line-data" data-line-start="46" data-line-end="47">All nodes in an AVL Tree have a balance factor (bf)</li>
<li class="has-line-data" data-line-start="47" data-line-end="48">Balance factor of a node = height of the left subtree minus the height of the right subtree</li>
<li class="has-line-data" data-line-start="48" data-line-end="49">An AVL tree can have only balance factors of -1,0, or 1 at every node</li>
<li class="has-line-data" data-line-start="49" data-line-end="50">The height of a subtree is basically how many connections it has</li>
<li class="has-line-data" data-line-start="50" data-line-end="52">If it has 0 connectons then its height is also 0</li>
</ul>
<p class="has-line-data" data-line-start="52" data-line-end="53"><img src="image-3.png" alt="Alt text"></p>
<h1 class="code-line" data-line-start="55" data-line-end="56"><a id="AVL_Trees_Implementation_55"></a>AVL Trees: Implementation</h1>
<ul>
<li class="has-line-data" data-line-start="57" data-line-end="59">To implement an AVL tree, simply associated a BF with each node, “x”</li>
</ul>
<p class="has-line-data" data-line-start="59" data-line-end="60"><img src="image-4.png" alt="Alt text"></p>
<pre><code class="has-line-data" data-line-start="62" data-line-end="69" class="language-sh">struct AVLTreeNode{
    int data;
    int BF;
    struct AVLTreeNode *left;
    struct AVLTreeNode *right;
}
</code></pre>
<p class="has-line-data" data-line-start="70" data-line-end="71">In an AVL Tree, BF can be one of {-1,0,1}</p>
<h1 class="code-line" data-line-start="72" data-line-end="73"><a id="Insertion_72"></a>Insertion</h1>
<ul>
<li class="has-line-data" data-line-start="73" data-line-end="74">Insertion may cause unbalancing in the tree</li>
<li class="has-line-data" data-line-start="74" data-line-end="75">When you insert into an AVL it will be the same as a BST</li>
<li class="has-line-data" data-line-start="75" data-line-end="78">Once the new node is inserted, the balance MUST be checked and restored if the tree has become unbalanced
<ul>
<li class="has-line-data" data-line-start="76" data-line-end="78">It often turns out that the new node can be inserted without affecting the height of the subtree
<ul>
<li class="has-line-data" data-line-start="77" data-line-end="78">If this happens, then the balance of the root will not be changed</li>
</ul>
</li>
</ul>
</li>
<li class="has-line-data" data-line-start="78" data-line-end="80">The only case that causes difficulty:
<ul>
<li class="has-line-data" data-line-start="79" data-line-end="80">Inserting a new node into a subtree of the root, which is taller than the other subtree, and the height of the taller subtree increases</li>
</ul>
</li>
<li class="has-line-data" data-line-start="80" data-line-end="86">Thus, an AVL tree can become unbalanced due to an insertion in one of four ways:
<ol>
<li class="has-line-data" data-line-start="81" data-line-end="82">Inserting a new node into the right subtree of a right child</li>
<li class="has-line-data" data-line-start="82" data-line-end="84">Inserting a new node into the left subtree of a left child
<ul>
<li class="has-line-data" data-line-start="83" data-line-end="84">This is the symmetric case</li>
</ul>
</li>
<li class="has-line-data" data-line-start="84" data-line-end="85">Inserting a new node into the left subtree of a right child</li>
<li class="has-line-data" data-line-start="85" data-line-end="86">Inserting a new node into the right subtree of a left child</li>
</ol>
</li>
<li class="has-line-data" data-line-start="86" data-line-end="87">Inserting a new node may cause the BF of some node, on the path from the root to the insertion point, to become 2 or -2</li>
<li class="has-line-data" data-line-start="87" data-line-end="92">Solution:
<ul>
<li class="has-line-data" data-line-start="88" data-line-end="89">First insert the node following typical rules of a BST</li>
<li class="has-line-data" data-line-start="89" data-line-end="90">Then from that insertion point, BACK UP towards the root, updating the bfs of all node along the path to root</li>
<li class="has-line-data" data-line-start="90" data-line-end="92">If a node ends of with a BF of 2 or -2, you must adjust the tree by rotating around deepest such node</li>
</ul>
</li>
</ul>
<p class="has-line-data" data-line-start="92" data-line-end="93"><img src="image-5.png" alt="Alt text"></p>
<h1 class="code-line" data-line-start="95" data-line-end="96"><a id="Summary_95"></a>Summary</h1>
<p class="has-line-data" data-line-start="97" data-line-end="98">Insertion summary:</p>
<ul>
<li class="has-line-data" data-line-start="98" data-line-end="99">We insert following standard rules of a BST</li>
<li class="has-line-data" data-line-start="99" data-line-end="100">Then we trace back up to the root of the tree</li>
<li class="has-line-data" data-line-start="100" data-line-end="101">As we back out of the tree, constantly check the balanace factor of earch node</li>
<li class="has-line-data" data-line-start="101" data-line-end="103">When a node is out of balance, we balance it and continue back up out of the tree</li>
</ul>
<p class="has-line-data" data-line-start="103" data-line-end="104">Arguments for using AVL Trees:</p>
<ol>
<li class="has-line-data" data-line-start="104" data-line-end="105">Search/insertion/deletion is O(logn) since AVL trees are always balances</li>
<li class="has-line-data" data-line-start="105" data-line-end="107">The height balancing adds no more than a constant factor to the speed of insertion</li>
</ol>
<p class="has-line-data" data-line-start="107" data-line-end="108">Arguments against using AVL trees:</p>
<ol>
<li class="has-line-data" data-line-start="108" data-line-end="109">Requires extra space for balancing factor</li>
<li class="has-line-data" data-line-start="109" data-line-end="110">It may be OK to have a partially balanced tree that would give performance similar to AVL trees without requiring the balancing factor</li>
</ol>
<h1 class="code-line" data-line-start="112" data-line-end="113"><a id="Insertion_Revisited_112"></a>Insertion Revisited</h1>
<p class="has-line-data" data-line-start="114" data-line-end="115">There are 4 types of trees and this is how you can restructure</p>
<p class="has-line-data" data-line-start="116" data-line-end="117"><img src="image-6.png" alt="Alt text"></p>
<p class="has-line-data" data-line-start="119" data-line-end="120">There are 4 insertion Scenarios</p>
<ol>
<li class="has-line-data" data-line-start="120" data-line-end="122">Insertion into the left subtree of the left child of the root<br>
<img src="image-7.png" alt="Alt text"></li>
<li class="has-line-data" data-line-start="122" data-line-end="125">Insertion into the right subtree of the left child of the root.
<ul>
<li class="has-line-data" data-line-start="123" data-line-end="125">This is a case where you have to use double rotations<br>
<img src="image-8.png" alt="Alt text"></li>
</ul>
</li>
<li class="has-line-data" data-line-start="125" data-line-end="127">Insertion into the left subtree of the right child of the root<br>
<img src="image-9.png" alt="Alt text"></li>
<li class="has-line-data" data-line-start="127" data-line-end="130">Insertion into the right subtree of the right child of the root<br>
<img src="image-10.png" alt="Alt text"></li>
</ol>
<p class="has-line-data" data-line-start="130" data-line-end="131">Practical rules for insertion and balancing:</p>
<ul>
<li class="has-line-data" data-line-start="132" data-line-end="133">Insert a node following rules of BST insertion</li>
<li class="has-line-data" data-line-start="133" data-line-end="135">Once you insert a new node, perform the following</li>
</ul>
<ol>
<li class="has-line-data" data-line-start="135" data-line-end="136">Start finding the balance factors of ALL nodes along the path from the insertion point to the root</li>
<li class="has-line-data" data-line-start="136" data-line-end="137">As soon as you find the first node out of balance, mark that node as one of your three “restructuring nodes”</li>
<li class="has-line-data" data-line-start="137" data-line-end="138">Then, take two steps, back down, towards the insertion point and mark those two nodes as well</li>
<li class="has-line-data" data-line-start="138" data-line-end="143">Label those “A,B,C” nodes appropriately (and subtrees)
<ul>
<li class="has-line-data" data-line-start="139" data-line-end="143">Of the three nodes:
<ul>
<li class="has-line-data" data-line-start="140" data-line-end="141">The smallest node should be labeled ‘A’</li>
<li class="has-line-data" data-line-start="141" data-line-end="142">The middle node should be labeled ‘B’</li>
<li class="has-line-data" data-line-start="142" data-line-end="143">Last one is ‘C’</li>
</ul>
</li>
</ul>
</li>
<li class="has-line-data" data-line-start="143" data-line-end="145">Restructure those three nodes (and their subtrees)</li>
</ol>
<h1 class="code-line" data-line-start="145" data-line-end="146"><a id="Go_to_ipad_notes_for_example_145"></a>Go to ipad notes for example</h1>
</body></html>